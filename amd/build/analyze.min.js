define("theme_seo/analyze",["exports","theme_seo/seord","jquery","core/templates"],(function(_exports,_seord,_jquery,_templates){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Analyze the page content to calculate the SEO score and
   * display the data and problems to the admin.
   *
   * @module     theme_seo/analyze
   * @copyright  2025 Mohammad Farouk <phun.for.physics@gmail.com>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_seord=_interopRequireDefault(_seord),_jquery=_interopRequireDefault(_jquery),_templates=_interopRequireDefault(_templates);_exports.init=function(){let publicPage=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],redirected=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,_jquery.default)((async function(){var _document$querySelect,_document$querySelect2;let toogelTimeout;if((0,_jquery.default)(".seo-manager-footer__toggle").on("click",(function(){clearTimeout(toogelTimeout),(0,_jquery.default)(".seo-manager-footer__content").slideToggle(),toogelTimeout=setTimeout((()=>{let isVisible=(0,_jquery.default)(".seo-manager-footer__content").is(":visible");(0,_jquery.default)(this).html(isVisible?"&times;":"&#9650;")}),500)})),!publicPage||redirected)return;let keywords=(null===(_document$querySelect=document.querySelector("meta[name='keywords']"))||void 0===_document$querySelect?void 0:_document$querySelect.content)||"";keywords=keywords.split(",").map((value=>value.trim()));const contentJson={title:document.title||"Untitled Page",htmlText:(0,_jquery.default)('[data-purpose="seo-page-content"]').html(),keyword:keywords.shift()??"",subKeywords:keywords,metaDescription:(null===(_document$querySelect2=document.querySelector("meta[name='description']"))||void 0===_document$querySelect2?void 0:_document$querySelect2.content)||"",languageCode:M.cfg.language};let checker=new _seord.default(contentJson,window.location.hostname,!0),result=await checker.analyzeSeo(),context={seoscore:result.seoScore,wordcount:result.wordCount,keywordseoscore:result.keywordSeoScore,keyworddensity:result.keywordDensity,keywordfrequency:result.keywordFrequency,pagetitle:contentJson.title,metadescription:contentJson.metaDescription,keyword:contentJson.keyword,subkeywords:contentJson.subKeywords.join(", "),titlewordcount:result.titleSEO.wordCount,titlekeyworddensity:result.titleSEO.keywordWithTitle.density,titlekeywordposition:result.titleSEO.keywordWithTitle.position,titlekeyword:result.titleSEO.keywordWithTitle.keyword,subkeywordswithtitle:result.titleSEO.subKeywordsWithTitle,warning:result.messages.warnings,goodpoints:result.messages.goodPoints,minorwarnings:result.messages.minorWarnings,totallinks:result.totalLinks,internallinkscount:result.internalLinks.all.length,uniqueinternallinkscount:result.internalLinks.unique.length,duplicateinternallinkscount:result.internalLinks.duplicate.length,uniqueinternallinks:result.internalLinks.unique,duplicateinternallinks:result.internalLinks.duplicate,externallinkscount:result.outboundLinks.all.length,uniqueexternallinkscount:result.outboundLinks.unique.length,duplicateexternallinkscount:result.outboundLinks.duplicate.length,uniqueexternallinks:result.outboundLinks.unique,duplicateexternallinks:result.outboundLinks.duplicate},html=await _templates.default.render("theme_seo/seo-info",context);(0,_jquery.default)(".seo-info-details").html(html)}))}}));

//# sourceMappingURL=analyze.min.js.map